<html>
<head>
  <link rel="stylesheet" href="/resources/css/bootstrap.css"></link>
  <link href='/resources/css/common.css' rel='stylesheet' type='text/css'></link>
  <link href='/resources/css/flipper.css' rel='stylesheet' type='text/css'></link>

  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>

  <script src='/resources/lib/angular.js'></script>
  <script src='/resources/js/ImageRotatorController.js'></script>
  <script src='/resources/js/ImageRotatorDirective.js'></script>
  <script src='/resources/js/PDialogCtrl.js'></script>

  <script src="/socket.io/socket.io.js"></script>

  <script>
  $(document).ready(function() {
    var socket = io();

    function changeState(state) {
      console.log("Trying to change state to ", state);
      var scope = angular.element($("#image-rotator-controller")).scope();
      scope.$apply(function(){
        scope.state = state;
      })
    }

    socket.on('stateChange', function(msg){
      console.log("State Changed ", msg);

      var color;
      if(msg === 'state1') {
        color = 'white';
        console.log('state1');
        //$('#image-rotator-controller').attr('state', 'initial');
        changeState('initial');
      } else if(msg === 'state2') {
        color = 'yellow';
        console.log('state2');
        // $('#image-rotator-controller').attr('state', 'question');
        changeState('question');
      } else if(msg === 'state3') {
        color = 'green';
        console.log('state3');
        // $('#image-rotator-controller').attr('state', 'answer');
        changeState('answer');
      } else {
        console.log("Don't understand msg");
      }

      $('body').css('background-color', color);
    });
  });
  </script>

  <style>
  .box{
    position: relative;
    width: 100%;		/* desired width */
    max-width: 1200px;
    min-width: 800px;
  }
  .box:before{
    content: "";
    display: block;
    padding-top: 75%;
  }
  .content{
    position:  absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background-color: yellow;
  }
  .img-row {
    height: 25%;
    background-color: blue;
  }
  .main-row {
    height: 50%;
    background-color: black;
  }
  .item-a {
    border: 1px solid black;
    background-color: green;
    height: 100%;
    padding: 0px;
  }
  .item-b {
    border: 1px solid black;
    background-color: orange;
    height: 100%;
  }

  .bookend-box {
    height: 50%;
  }

  .pdialog {
    width: 100%;
    height: 100%;
  }

</style>
</head>

<body ng-app="MainApp">
  <div class="box" style="margin: auto; margin-top: 10px">
    <div id="image-rotator-controller" ng-controller="ImageRotatorController" class="content" state="initial">
      <div class="fluid-row img-row">
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
      </div>

      <div class="fluid-row main-row">
        <div class="col-xs-2 fluid-row" style="padding: 0px">
          <image-rotator class="col-xs-12 bookend-box item-a"></image-rotator>
          <image-rotator class="col-xs-12 bookend-box item-a"></image-rotator>
        </div>
        <div class="col-xs-8 item-b">
          <proposal-dialog class='pdialog'></proposal-dialog>
        </div>
        <div class="col-xs-2 fluid-row" style="padding: 0px">
          <image-rotator class="col-xs-12 bookend-box item-a"></image-rotator>
          <image-rotator class="col-xs-12 bookend-box item-a"></image-rotator>
        </div>
      </div>

      <div class="fluid-row img-row">
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
        <image-rotator class="col-xs-2 item-a"></image-rotator>
      </div>

    </div>
  </div>
</body>
</html>
